<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>C·ª≠a h√†ng MXD ‚Äì S·∫£n ph·∫©m ch·ªçn l·ªçc</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="C√°c s·∫£n ph·∫©m x√¢y d·ª±ng ƒë∆∞·ª£c ch·ªçn l·ªçc t·ª´ MXD ‚Äì ƒë√∫ng nhu c·∫ßu, ƒë√°ng ƒë·ªìng ti·ªÅn.">
  <link rel="stylesheet" href="/assets/css/styles.css">
  <style>
    /* Layout c·ª≠a h√†ng */
    body { font-family: system-ui, sans-serif; margin: 0; background: #f8fafc; color: #0b1220; }
    .container { max-width: 1100px; margin: auto; padding: 20px; }
    h1 { font-size: 28px; margin-bottom: 16px; }
    .grid { display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
    .card {
      border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden;
      background: #fff; display: flex; flex-direction: column;
    }
    .card img { width: 100%; height: 180px; object-fit: cover; }
    .card .info { padding: 14px; flex: 1; display: flex; flex-direction: column; }
    .card h2 { font-size: 18px; margin: 0 0 8px; }
    .card p { font-size: 14px; color: #64748b; margin-bottom: 12px; flex: 1; }
    .price { font-weight: 700; margin-bottom: 8px; color: #0f172a; }
    .rating { font-size: 14px; color: #f59e0b; margin-bottom: 12px; }
    .btn {
      background: #1d4ed8; color: #fff; text-align: center;
      padding: 10px 12px; border-radius: 8px; text-decoration: none; font-weight: 600;
    }
    .btn:hover { background: #2563eb; }
    header, footer { padding: 16px; background: #fff; text-align: center; border-bottom: 1px solid #e5e7eb; }
    footer { border-top: 1px solid #e5e7eb; font-size: 14px; color: #64748b; }

    /* N√∫t n·ªïi li√™n h·ªá ‚Äì t·∫°m ƒë·ªÉ inline, l√°t t√°ch ra /assets/js/floating-contact.js */
    .float-box{
      position:fixed; right:16px; bottom:16px;
      display:flex; flex-direction:column; gap:10px; z-index:9999;
    }
    .float-btn{
      display:flex; align-items:center; gap:8px;
      background:#fff; color:#111; text-decoration:none;
      border:1px solid #111; border-radius:999px;
      padding:10px 14px; box-shadow:0 8px 24px rgba(0,0,0,.12);
      font:600 14px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      transition:transform .15s ease;
    }
    .float-btn:hover{ transform:translateY(-1px); }
    .float-btn .icon{ font-size:18px; line-height:1; }
    @media (max-width:480px){ .float-btn .label{ display:none; } }
  </style>
  <script src="/assets/analytics.js"></script>
</head>
<body>

  <header>
    <a href="/" style="text-decoration:none; font-weight: 700; font-size: 20px;">‚Üê V·ªÅ trang ch·ªß</a>
    <h1>Danh s√°ch s·∫£n ph·∫©m</h1>
  </header>

  <main class="container">
    <div id="product-list" class="grid">
      <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c load t·ª± ƒë·ªông t·∫°i ƒë√¢y -->
    </div>
  </main>

  <footer>
    ¬© <span id="year"></span> MXD ‚Äì Li√™n h·ªá: <a href="tel:+84338328898">0338 328 898</a>
  </footer>

  <!-- N√∫t n·ªïi li√™n h·ªá -->
  <div class="float-box" aria-label="Li√™n h·ªá nhanh MXD">
    <a class="float-btn" href="tel:+84338328898" aria-label="G·ªçi ƒëi·ªán cho MXD">
      <span class="icon">üìû</span><span class="label">G·ªçi MXD</span>
    </a>
    <a class="float-btn" href="https://zalo.me/0338328898" target="_blank" rel="noopener" aria-label="Nh·∫Øn Zalo cho MXD">
      <span class="icon">üí¨</span><span class="label">Zalo</span>
    </a>
    <a class="float-btn" href="https://m.me/mxd6686" target="_blank" rel="noopener" aria-label="Nh·∫Øn Messenger cho MXD">
      <span class="icon">üì®</span><span class="label">Messenger</span>
    </a>
  </div>

  <!-- Script: affiliate (ƒë·∫∑t tr∆∞·ªõc khi ƒë√≥ng body ·ªü m·ªçi trang b√°n) -->
  <script src="/mxd-affiliate.js"></script>

  <!-- Script: nƒÉm hi·ªán t·∫°i + load products + SW register (kh√¥ng l·ªìng script) -->
  <script>
    // NƒÉm hi·ªán t·∫°i
    document.getElementById("year").textContent = new Date().getFullYear();

    // Load s·∫£n ph·∫©m
    fetch('/products.json')
      .then(r => r.json())
      .then(products => {
        const container = document.getElementById('product-list');
        products.forEach(p => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <img src="${p.image}" alt="${p.name}" loading="lazy">
            <div class="info">
              <h2>${p.name}</h2>
              <p>${p.description}</p>
              <div class="price">${p.price} ƒë</div>
              <div class="rating">‚≠ê ${p.rating}</div>
              <a class="btn" href="${p.link}" target="_blank" rel="noopener noreferrer sponsored">Xem gi√°</a>
            </div>
          `;
          container.appendChild(card);
        });

        // N·∫øu script affiliate c√≥ h√†m scan, g·ªçi l·∫°i sau khi append s·∫£n ph·∫©m
        if (window.mxdAffiliate && typeof window.mxdAffiliate.scan === 'function') {
          window.mxdAffiliate.scan();
        }
      })
      .catch(error => {
        console.error("Kh√¥ng th·ªÉ t·∫£i s·∫£n ph·∫©m:", error);
        document.getElementById('product-list').innerHTML =
          "<p>Kh√¥ng th·ªÉ t·∫£i danh s√°ch s·∫£n ph·∫©m. Vui l√≤ng th·ª≠ l·∫°i sau.</p>";
      });

    // ƒêƒÉng k√Ω Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js', { scope: '/' })
          .catch(err => console.warn('SW register failed:', err));
      });
    }
  </script>
  <script src="/mxd-affiliate.js"></script>
<script src="/assets/js/floating-contact.js" defer></script>

</body>
</html>
