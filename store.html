<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>

  <title>Cửa hàng MXD – Sản phẩm chọn lọc</title>
  <meta name="description" content="Các sản phẩm xây dựng được chọn lọc từ MXD – đúng nhu cầu, đáng đồng tiền.">
  <link rel="canonical" href="https://mxd210.github.io/store.html">
  <meta name="robots" content="index,follow">

  <!-- OG -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Cửa hàng MXD – Sản phẩm chọn lọc">
  <meta property="og:description" content="Các sản phẩm xây dựng được chọn lọc từ MXD – đúng nhu cầu, đáng đồng tiền.">
  <meta property="og:url" content="https://mxd210.github.io/store.html">
  <meta property="og:image" content="/assets/img/products/placeholder.webp">

  <!-- VERIFY (điền mã thật khi có) -->
  <meta name="google-site-verification" content="PASTE_GOOGLE_CODE">
  <meta name="msvalidate.01" content="PASTE_BING_CODE">

  <link rel="stylesheet" href="/assets/site.css">

  <style>
    /* Theme cơ bản (có dark mode) */
    :root{
      --bg:#fff; --text:#111; --muted:#666; --border:#eaeaea;
      --card:#fff; --brand:#0a84ff; --brand-contrast:#fff;
      --hover:#111; --radius:16px; --gap:16px; --shadow:0 6px 20px rgba(0,0,0,.06);
    }
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0f1215; --text:#e8e8e8; --muted:#a2a2a2; --border:#262b31; --card:#14181d; --shadow:0 10px 28px rgba(0,0,0,.35); }
    }

    /* Nav */
    .nav-link{ padding:8px 10px; border-radius:10px; color:var(--text); text-decoration:none; }
    .nav-link:hover{ background:rgba(23,70,255,.08) }
    .nav-link[aria-current="page"]{ background:#eef4ff; color:#1746ff }
    @media (max-width:480px){ .nav-link{ padding:8px } }

    /* Quick-Nav */
    .quick-nav{display:flex;gap:12px;flex-wrap:wrap;padding:8px 0;margin:12px 0}
    .qnav-item{
      display:flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid var(--border);
      border-radius:12px;background:var(--card);box-shadow:var(--shadow);color:var(--text);
      text-decoration:none
    }
    .qnav-item:hover{background:rgba(23,70,255,.06)}
    .quick-nav img{width:28px;height:28px;border-radius:8px}

    /* Grid / Card */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:var(--gap);margin:16px 0}
    .card{border:1px solid var(--border);border-radius:var(--radius);background:var(--card);overflow:hidden;display:flex;flex-direction:column;box-shadow:var(--shadow);transition:transform .15s}
    .card:hover{transform:translateY(-2px)}
    .card img{width:100%;aspect-ratio:4/3;object-fit:cover;background:#f7f7f7;height:auto}
    .card .body{padding:12px}
    .name{font-size:16px;line-height:1.35;margin:0 0 6px}
    .price{font-weight:800;margin:4px 0 10px}
    /* Buy button: tôn trọng merchant (Shopee/Lazada...) */
    .buy{display:inline-block;width:100%;text-align:center;padding:10px 12px;border-radius:12px;font-weight:800;text-decoration:none;color:#fff;border:1px solid transparent}
    .buy:focus-visible{outline:2px solid #0000ff55;outline-offset:2px}
    .buy:active{transform:translateY(1px)}
    .buy{ background:#1746ff; border-color:#1746ff }
    .buy[data-merchant="shopee"]{ background:#ee4d2d; border-color:#ee4d2d }
    .buy[data-merchant="lazada"]{ background:#0f146d; border-color:#0f146d }
    .buy[data-merchant="tiki"]{ background:#1a94ff; border-color:#1a94ff }
    .buy[data-merchant="tiktok"]{ background:#111; border-color:#111 }
    .buy:hover{ filter:brightness(1.05) }

    /* Skeleton (nếu cần thì renderer sẽ thay) */
    .skeleton{position:relative;overflow:hidden;background:linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.12) 37%, rgba(0,0,0,0.06) 63%)}
    .skeleton::after{content:'';position:absolute;inset:0;animation:shimmer 1.4s infinite}
    @keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
  </style>

  <!-- SUB mặc định (override bằng ?sub1=&sub2=... khi test) -->
  <meta name="at:sub1" content="">
  <meta name="at:sub2" content="">
  <meta name="at:sub3" content="store">
  <meta name="at:sub4" content="mxd210">

  <!-- GA4 trước Affiliate (chuẩn MXD) -->
  <script defer src="/assets/analytics.js?v=2025-09-26-fb2"></script>
  <script defer src="/assets/mxd-affiliate.js?v=2025-09-26-fb2"></script>
  <script defer src="/assets/js/render-products.js?v=2025-09-26-fb2"></script>

  <!-- Floating contact (giữ nguyên nếu bạn đang dùng file tách riêng) -->
  <script defer src="/assets/js/floating-contact.js?v=2025-09-26-1"></script>
</head>
<body>
  <header style="position:sticky;top:0;z-index:50;background:var(--bg);backdrop-filter:blur(6px)">
    <div class="container" style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:12px 16px;border-bottom:1px solid var(--border)">
      <a href="/" class="brand" style="font-weight:900;font-size:18px;color:var(--text);text-decoration:none">MXD</a>
      <nav class="site-nav" style="display:flex;gap:10px;margin-left:auto;flex-wrap:wrap">
        <a href="/" class="nav-link">Trang chủ</a>
        <a href="/store.html" class="nav-link" aria-current="page">Cửa hàng</a>
        <a href="/blog/" class="nav-link">Tin tức</a>
        <a href="/tu-van.html" class="nav-link">Tư vấn</a>
        <a href="/lien-he.html" class="nav-link">Liên hệ</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- QUICK-NAV (mới thêm) -->
    <section aria-label="Danh mục nhanh">
      <ul class="quick-nav" id="quick-nav"></ul>
    </section>

    <div id="product-list" class="grid" aria-live="polite"></div>
    <p id="empty" class="muted" style="display:none">Chưa có sản phẩm. Hãy thêm <code>/assets/data/affiliates.json</code> hoặc <code>/products.json</code>.</p>
    <noscript>Trang cần JavaScript để hiển thị danh sách sản phẩm.</noscript>
  </main>

  <footer>
    <div class="container">
      © MXD · <a href="/chinh-sach/bao-mat.html">Bảo mật</a> · <a href="/chinh-sach/doi-tra.html">Đổi trả</a> · <a href="/chinh-sach/bao-hanh.html">Bảo hành</a>
    </div>
  </footer>

  <!-- Loader Quick-Nav + Render sản phẩm -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // QUICK-NAV: đọc nhiều nguồn + có fallback bắt buộc 2 danh mục
      const qn = document.getElementById('quick-nav');

      (async () => {
        const sources = ['/assets/categories.json', '/assets/data/categories.json'];
        let raw = null;

        for (const url of sources) {
          try {
            const r = await fetch(url, { cache: 'no-store' });
            if (r.ok) { raw = await r.json(); break; }
          } catch(_) {}
        }

        // Chuẩn hoá list
        let list = [];
        if (Array.isArray(raw)) list = raw;
        else if (raw && Array.isArray(raw.categories)) list = raw.categories;
        else if (raw && typeof raw === 'object') list = Object.values(raw);

        const norm = (x = {}) => {
          const slug = (x.slug || '').toLowerCase();
          return {
            slug,
            name: x.name || x.title || 'Danh mục',
            icon: x.icon || (slug ? `/assets/img/categories/${slug}.webp` : '/assets/img/categories/placeholder.webp'),
            path: x.path || x.canonical || (slug ? `/store/${slug}.html` : '#')
          };
        };

        let items = list.map(norm);

        // Bảo đảm luôn có 2 danh mục cốt lõi
        const ensure = (slug, name, icon) => {
          if (!items.some(i => i.slug === slug)) {
            items.push(norm({ slug, name, icon, path: `/store/${slug}.html` }));
          }
        };
        ensure('may-cat', 'Máy cắt', '/assets/img/categories/may-cat.webp');
        ensure('may-khoan-duc-vit', 'Khoan · Đục · Vít', '/assets/img/categories/may-khoan-duc-vit.webp');
ensure('may-laze', 'Máy laser', '/assets/img/categories/may-laze.webp');

        // Render
        if (!items.length) {
          qn.innerHTML = `
            <li>
              <a href="/store/may-cat.html" class="qnav-item">
                <img src="/assets/img/categories/may-cat.webp" alt="Máy cắt" width="28" height="28" loading="lazy" decoding="async"/>Máy cắt
              </a>
            </li>
            <li>
              <a href="/store/may-khoan-duc-vit.html" class="qnav-item">
                <img src="/assets/img/categories/may-khoan-duc-vit.webp" alt="Khoan · Đục · Vít" width="28" height="28" loading="lazy" decoding="async"/>Khoan · Đục · Vít
              </a>
            </li>`;
        } else {
          qn.innerHTML = items.map(c => `
            <li>
              <a href="${c.path}" class="qnav-item">
                <img src="${c.icon}" alt="${c.name}" width="28" height="28" loading="lazy" decoding="async"/>
                ${c.name}
              </a>
            </li>
            <li class="category-card">
<a href="/store/dung-cu-op-lat.html" class="category-link">
<img src="/assets/img/categories/dung-cu-op-lat.webp" alt="Dụng cụ ốp lát" width="320" height="320" loading="lazy">
<span>Dụng cụ ốp lát</span>
</a>
</li>
          `).join('');
        }
      })();

      // Hiển thị TẤT CẢ sản phẩm (có thể giới hạn bằng ?limit=12)
      const qs = new URLSearchParams(location.search);
      const lim = qs.has('limit') ? Number(qs.get('limit')) : undefined;
      const limit = Number.isFinite(lim) ? lim : undefined;
      MXD.renderProducts('#product-list', limit);
    });
  </script>

  <!-- SW -->
  <!-- trước: /sw.js?v=2025-09-26-fb2 -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js?v=2025-09-30-mlz1');
  }
</script>

</body>
</html>
