<!doctype html>
<meta charset="utf-8">
<title>Đang chuyển hướng…</title>
<meta name="robots" content="noindex,nofollow">
<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;padding:24px}</style>
<p>Đang chuyển hướng bạn đến nơi bán…</p>
<p>Nếu không được chuyển, <a id="fallback" href="/">bấm vào đây</a>.</p>
<script>
(async () => {
  const p = new URL(location.href).searchParams;
  const sku = (p.get('sku')||'').trim().toLowerCase();
  const fb = document.getElementById('fallback');

  try {
    const res = await fetch('/assets/data/affiliates.json', { cache: 'no-cache' });
    const map = await res.json();
    const item = map[sku];

    if (item && item.deeplink) {
      fb.href = item.deeplink;
      location.replace(item.deeplink);
    } else {
      fb.textContent = 'Link không tồn tại — về trang chủ';
      fb.href = '/';
    }
  } catch {
    fb.textContent = 'Không tải được dữ liệu — về trang chủ';
    fb.href = '/';
  }
})();
</script>
