<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Thời trang | MXD</title>
  <meta name="description" content="Từ công sở đến bảo hộ lao động, thời trang nam/nữ/trẻ em và trang phục mùa hè-thu-đông — MXD giúp bạn chọn nhanh và đúng."/>
  <link rel="canonical" href="https://mxd210.github.io/store/thoi-trang.html"/>
  <meta name="robots" content="index,follow"/>

  <!-- SEO: OG -->
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Thời trang | MXD"/>
  <meta property="og:description" content="Danh mục thời trang tổng hợp: nam, nữ, trẻ em, thu-đông. Hiển thị tự động từ affiliates.json."/>
  <meta property="og:url" content="https://mxd210.github.io/store/thoi-trang.html"/>
  <meta property="og:image" content="https://mxd210.github.io/assets/img/categories/thoi-trang.webp"/>

  <!-- CSS cố định -->
  <link rel="stylesheet" href="/assets/site.css"/>

  <!-- GA4 TRƯỚC affiliate (chuẩn MXD) -->
  <script defer src="/assets/analytics.js"></script>
  <script defer src="/assets/mxd-affiliate.js"></script>
</head>
<body>
  <nav class="breadcrumb"><a href="/">Trang chủ</a> › <a href="/store.html">Cửa hàng</a> › Thời trang</nav>
  <h1>Thời trang</h1>
  <p>Từ trang phục công sở đến đồ bảo hộ lao động, thời trang nam/nữ/trẻ em và trang phục mùa hè, thu đông — MXD giúp bạn chọn lựa dễ dàng.</p>

  <div class="filter-row">
    <a class="btn" href="/store/thoi-trang.html">Tất cả</a>
    <a class="btn" href="/store/thoi-trang-nam.html">Thời trang nam</a>
    <a class="btn" href="/store/thoi-trang-nu.html">Thời trang nữ</a>
    <a class="btn" href="/store/tre-em.html">Trẻ em</a>
    <a class="btn" href="/store/thoi-trang-thu-dong.html">Thu đông</a>
  </div>

  <!-- Lưới sản phẩm -->
  <section id="product-grid"
           class="product-grid"
           data-category="thoi-trang"
           data-alias="thoi-trang,thoi-trang-nam,thoi-trang-nu,tre-em,thoi-trang-thu-dong">
  </section>

  <footer class="page-foot">© MXD · <a href="/chinh-sach/bao-mat.html">Bảo mật</a> · <a href="/chinh-sach/doi-tra.html">Đổi trả</a> · <a href="/chinh-sach/bao-hanh.html">Bảo hành</a></footer>

  <!-- Fallback renderer: đọc đúng /assets/data/affiliates.json, rơi về /products.json, rồi /affiliates.json (root) -->
  <script>
  (async function renderMXD(){
    const grid = document.getElementById('product-grid');
    const cat = (grid.getAttribute('data-category')||'').trim();
    const aliases = (grid.getAttribute('data-alias')||'').split(',').map(s=>s.trim()).filter(Boolean);
    const sources = ['/assets/data/affiliates.json','/products.json','/affiliates.json'];
    let data=null, lastErr=null;
    for(const src of sources){
      try{ const r=await fetch(src,{cache:'no-store'}); if(r.ok){ data=await r.json(); break; } }catch(e){ lastErr=e; }
    }
    if(!Array.isArray(data)){ grid.innerHTML = `<p class="muted">Không tải được dữ liệu sản phẩm (đã thử ${sources.join(' → ')}).</p>`; console.warn('MXD render fail', lastErr); return; }
    const pick = (p)=> {
      const c = (p.category||'').toLowerCase();
      return c===cat || aliases.includes(c);
    };
    const items = data.filter(p=>p && p.status!=='archived' && pick(p));
    if(!items.length){ grid.innerHTML = `<p class="muted">Chưa có sản phẩm cho danh mục này. Hãy nạp dữ liệu vào <code>/assets/data/affiliates.json</code>.</p>`; return; }
    grid.innerHTML = items.map(p=>{
      const img = p.image || `/assets/img/products/${p.sku}.webp`;
      const price = (p.price!=null)? new Intl.NumberFormat('vi-VN').format(p.price)+'₫' : '';
      const merchant = p.merchant||'';
      const origin = p.origin||'#';
      return `
        <article class="product-card" data-sku="${p.sku}">
          <a class="thumb" href="/g.html?sku=${encodeURIComponent(p.sku)}">
            <img loading="lazy" src="${img}" alt="${p.name} — MXD" width="320" height="320">
          </a>
          <h3 class="name"><a href="/g.html?sku=${encodeURIComponent(p.sku)}">${p.name}</a></h3>
          <div class="price">${price}</div>
          <div class="actions">
            <a class="buy" href="${origin}" data-merchant="${merchant}" rel="nofollow">Mua ngay</a>
          </div>
        </article>`;
    }).join('');
  })();
  </script>
</body>
</html>
