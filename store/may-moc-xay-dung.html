<!-- REPLACE WHOLE FILE: /store/may-moc-xay-dung.html -->
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>

  <title>Máy móc xây dựng – Thiết bị chọn lọc | MXD210</title>
  <meta name="description" content="Máy móc, thiết bị phục vụ thi công và sửa chữa nhỏ: máy khoan, máy cắt, máy rung bê tông, máy ốp lát, bàn đẩy… được MXD210 chọn theo tiêu chí: dễ mua, dễ bảo hành, phù hợp với nhu cầu thực tế ngoài công trình.">
  <link rel="canonical" href="https://mxd210.github.io/store/may-moc-xay-dung.html"/>
  <meta name="robots" content="index,follow"/>

  <!-- OPEN GRAPH -->
  <meta property="og:title" content="Máy móc xây dựng – Thiết bị chọn lọc | MXD210"/>
  <meta property="og:description" content="Gợi ý máy móc, thiết bị xây dựng: máy khoan, máy cắt, máy rung, máy ốp lát, bàn đẩy… ưu tiên những mẫu phù hợp thợ thi công, chủ nhà tự xử lý các hạng mục nhỏ."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://mxd210.github.io/store/may-moc-xay-dung.html"/>

  <link rel="stylesheet" href="/assets/site.css"/>

  <!-- Analytics trước Affiliate -->
  <script defer src="/assets/analytics.js"></script>
  <script defer src="/assets/mxd-affiliate.js"></script>
  <script defer src="/assets/mxd-store.v2.js"></script>
</head>
<body data-nav="store">
  <header class="site-header">
    <div class="container">
      <a href="/" class="logo">
        <span class="logo-main">MXD210</span>
        <span class="logo-sub">Xây dựng &amp; Affiliate</span>
      </a>

      <nav class="main-nav">
        <ul>
          <li><a href="/" data-nav="home">Trang chủ</a></li>
          <li><a href="/store.html" data-nav="store">Cửa hàng</a></li>
          <li><a href="/blog-xay-dung.html" data-nav="blog-xd">Góc xây dựng</a></li>
          <li><a href="/mxd-aff-academy.html" data-nav="aff-academy">Góc Affiliate</a></li>
          <li><a href="/contact.html" data-nav="contact">Liên hệ</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="page-main">
    <section class="category-hero">
      <div class="container">
        <h1>Máy móc &amp; thiết bị cho anh em hiện trường</h1>
        <p>
          Những món phục vụ trực tiếp cho thi công, sửa chữa: máy khoan, máy cắt, máy rung bê tông,
          máy ốp lát, bàn đẩy, thiết bị đo, phụ kiện đi kèm… được chọn dựa trên kinh nghiệm thực tế ngoài công trình.
        </p>
      </div>
    </section>

    <section class="category-products container">
      <div class="category-toolbar">
        <div class="category-info">
          <strong>Máy móc xây dựng</strong>
          <span data-category-count></span>
        </div>
      </div>

      <!-- Quick-nav 3 nhóm -->
      <nav class="subcat-nav" aria-label="Nhóm sản phẩm trong Máy móc xây dựng">
        <a href="#dung-cu-cam-tay">Dụng cụ cầm tay</a>
        <a href="#do-bao-ho-lao-dong">Đồ bảo hộ lao động</a>
        <a href="#phu-kien-may">Phụ kiện máy</a>
      </nav>

      <!-- 1. DỤNG CỤ CẦM TAY -->
      <section id="dung-cu-cam-tay" class="subcat-section">
        <h2>Dụng cụ cầm tay</h2>
        <p>
          Máy khoan, máy cắt, máy mài, máy hàn, nén khí, bơm nước, các loại dụng cụ cầm tay phục vụ trực tiếp cho thi công.
        </p>
        <div class="product-grid" id="grid-dung-cu-cam-tay">
          <!-- JS sẽ đổ card sản phẩm vào đây -->
        </div>
      </section>

      <!-- 2. ĐỒ BẢO HỘ LAO ĐỘNG -->
      <section id="do-bao-ho-lao-dong" class="subcat-section">
        <h2>Đồ bảo hộ lao động</h2>
        <p>
          Giày, mũ, găng tay, kính, khẩu trang, quần áo bảo hộ… giúp anh em đi công trình an toàn hơn.
        </p>
        <div class="product-grid" id="grid-do-bao-ho-lao-dong">
          <!-- JS sẽ đổ card sản phẩm vào đây -->
        </div>
      </section>

      <!-- 3. PHỤ KIỆN MÁY -->
      <section id="phu-kien-may" class="subcat-section">
        <h2>Phụ kiện máy</h2>
        <p>
          Đá cắt, lưỡi cưa, mũi khoan, chổi than, đĩa mài… các món nhỏ nhưng thiếu là máy “đứng hình”.
        </p>
        <div class="product-grid" id="grid-phu-kien-may">
          <!-- JS sẽ đổ card sản phẩm vào đây -->
        </div>
      </section>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© MXD210 – Đồng hành cùng anh em ngoài công trình lẫn trong nhà.</p>
    </div>
  </footer>

  <script>
    (function () {
      'use strict';

      const GRID_HAND   = document.getElementById('grid-dung-cu-cam-tay');
      const GRID_SAFE   = document.getElementById('grid-do-bao-ho-lao-dong');
      const GRID_ACCESS = document.getElementById('grid-phu-kien-may');
      const COUNT_EL    = document.querySelector('[data-category-count]');

      if (!GRID_HAND || !GRID_SAFE || !GRID_ACCESS) return;

      // Các category con thuộc nhóm "Máy móc & Xây dựng"
      const CATS_HAND = [
        'may-khoan-bat-vit',
        'may-cat-cua-mai',
        'may-han',
        'may-nen-khi',
        'may-bom-nuoc',
        'dung-cu-cam-tay'
      ];
      const CATS_SAFE = [
        'do-bao-ho-lao-dong'
      ];
      const CATS_ACCESS = [
        'phu-kien-may'
      ];

      const ALL_CATS = CATS_HAND.concat(CATS_SAFE, CATS_ACCESS);

      const sources = [
        '/assets/data/affiliates.json',
        '/assets/data/products.json',
        '/products.json'
      ];

      function formatPrice(vnd) {
        if (vnd === undefined || vnd === null || vnd === '') return '';
        try {
          return new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND',
            maximumFractionDigits: 0
          }).format(vnd);
        } catch (e) {
          return String(vnd).replace(/\B(?=(\d{3})+(?!\d))/g, '.') + '₫';
        }
      }

      function createCard(p) {
        const article = document.createElement('article');
        article.className = 'product-card';

        const safeUrl = p.origin_url || '#';
        const safeMerchant = (p.merchant || '').toLowerCase();

        article.innerHTML = `
          <a href="${safeUrl}"
             class="product-link"
             data-merchant="${safeMerchant}">
            <div class="product-thumb">
              <img loading="lazy"
                   src="${p.image || '/assets/img/products/placeholder.webp'}"
                   alt="${p.name || 'Sản phẩm máy móc xây dựng'}">
            </div>
            <h3 class="product-title">${p.name || 'Sản phẩm chưa đặt tên'}</h3>
            ${p.price_vnd ? `<p class="product-price">${formatPrice(p.price_vnd)}</p>` : ''}
            <button class="product-buy-btn">Xem sản phẩm</button>
          </a>
        `;
        return article;
      }

      async function loadAndRender() {
        let data = null;

        for (const src of sources) {
          try {
            const res = await fetch(src, { cache: 'no-store' });
            if (!res.ok) continue;
            data = await res.json();
            if (data) break;
          } catch (e) {
            // thử source tiếp theo
          }
        }

        if (!data) {
          GRID_HAND.textContent = 'Không tải được dữ liệu sản phẩm. Thử lại sau.';
          return;
        }

        const list = Array.isArray(data) ? data : (data.products || []);
        const inCat = list.filter(function (p) {
          return p
            && ALL_CATS.indexOf(p.category) !== -1
            && p.origin_url
            && (p.status !== false);
        });

        if (COUNT_EL) {
          COUNT_EL.textContent = inCat.length ? `(${inCat.length} sản phẩm)` : '';
        }

        const groupHand   = [];
        const groupSafety = [];
        const groupAccess = [];

        inCat.forEach(function (p) {
          const cat = p.category;

          if (CATS_SAFE.indexOf(cat) !== -1) {
            groupSafety.push(p);
          } else if (CATS_ACCESS.indexOf(cat) !== -1) {
            groupAccess.push(p);
          } else {
            // còn lại rơi vào nhóm Dụng cụ cầm tay
            groupHand.push(p);
          }
        });

        if (!groupHand.length) {
          GRID_HAND.innerHTML = '<p>Đang bổ sung thêm dụng cụ cầm tay…</p>';
        } else {
          groupHand.forEach(function (p) {
            GRID_HAND.appendChild(createCard(p));
          });
        }

        if (!groupSafety.length) {
          GRID_SAFE.innerHTML = '<p>Đang bổ sung thêm đồ bảo hộ lao động…</p>';
        } else {
          groupSafety.forEach(function (p) {
            GRID_SAFE.appendChild(createCard(p));
          });
        }

        if (!groupAccess.length) {
          GRID_ACCESS.innerHTML = '<p>Đang bổ sung thêm phụ kiện máy…</p>';
        } else {
          groupAccess.forEach(function (p) {
            GRID_ACCESS.appendChild(createCard(p));
          });
        }
      }

      loadAndRender();
    })();
  </script>
</body>
</html>
