<!-- REPLACE WHOLE FILE: /index.html -->
<!-- MXD-CHECK v2025-10-13 [index]
- Canonical: https://mxd210.github.io/ ; robots=index,follow
- GA4 (/assets/analytics.js) BEFORE /assets/mxd-affiliate.js (only once)
- JSON-LD: Organization on index
- OG: title/desc/url/image (‚â•1200√ó630 .webp) absolute URL
- Quick-nav: /store.html + hubs (kh√¥ng hi·ªÉn th·ªã blog pillars tr√™n HOME)
- Floating contacts: Zalo 0338328898, Facebook /mxd6686 (dedupe ƒë·∫£m b·∫£o 1 block)
- SW: HTML network-first; assets stale-while-revalidate
FIND: MXD-ANCHOR:HEAD-META | MXD-ANCHOR:HERO | MXD-ANCHOR:METRICS | MXD-ANCHOR:QUICK-NAV | MXD-ANCHOR:UPDATED-STRIP | MXD-ANCHOR:BODY-END
-->
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>

  <title>MXD ‚Äî Trang ch·ªß</title>
  <meta name="description" content="MXD: Trung t√¢m mua s·∫Øm affiliate ng√†nh x√¢y d·ª±ng, c·∫≠p nh·∫≠t nhanh, ·∫£nh .webp t·ªëi ∆∞u, ƒëo l∆∞·ªùng ƒë·∫ßy ƒë·ªß.">
  <link rel="canonical" href="https://mxd210.github.io/">
  <meta name="robots" content="index,follow">

  <!-- OG -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="MXD ‚Äî Trang ch·ªß">
  <meta property="og:description" content="Danh m·ª•c r√µ r√†ng, s·∫£n ph·∫©m chu·∫©n ·∫£nh .webp, link ƒëo l∆∞·ªùng qua affiliate.">
  <meta property="og:url" content="https://mxd210.github.io/">
  <meta property="og:image" content="https://mxd210.github.io/assets/img/og/home.webp">

  <!-- VERIFY -->
  <meta name="google-site-verification" content="84L0tRVs_wNPAyXii38-OaeGi8TyJdMlkZXVIHcnj0o">

  <!-- MXD-ANCHOR:HEAD-META -->
  <link rel="stylesheet" href="/assets/site.css">
  <!-- Prefetch hub M·ªπ ph·∫©m ƒë·ªÉ click m∆∞·ª£t h∆°n -->
  <link rel="prefetch" href="/store/my-pham.html">

  <style>
    :root{
      /* T√¥ng m√†u m·ªõi: cam x√¢y d·ª±ng + x√°m xanh */
      --bg:#ffffff; --text:#111; --muted:#6b7280; --border:#e5e7eb;
      --card:#ffffff; --brand:#ff6a00; --brand-contrast:#ffffff;
      --hover:#111; --radius:16px; --gap:24px; --shadow:0 6px 20px rgba(0,0,0,.06);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0f1215; --text:#e8e8e8; --muted:#a2a2a2; --border:#262b31;
        --card:#14181d; --shadow:0 10px 28px rgba(0,0,0,.35);
      }
      /* === MXD COLOR ENHANCE v2025-10-13 =============================== */
      :root{
        --brand-2:#ffb703;
        --brand-3:#ff914d;
        --chip-bg:linear-gradient(135deg, rgba(255,106,0,.10), rgba(255,183,3,.10));
        --chip-border:#ffd9c4;
        --chip-shadow:0 8px 22px rgba(0,0,0,.12);
      }
      @media (prefers-color-scheme: dark){
        :root{
          --chip-bg:linear-gradient(135deg, rgba(255,106,0,.08), rgba(255,183,3,.08));
          --chip-border:#3b2a1f;
          --chip-shadow:0 10px 28px rgba(0,0,0,.18);
        }
      }

      .site-nav .nav-link{
        border:1px solid transparent;
        border-radius:12px;
        transition:background .15s ease, box-shadow .15s ease, border-color .15s ease;
      }
      .site-nav .nav-link:hover{
        background:var(--chip-bg);
        border-color:var(--chip-border);
        box-shadow:var(--chip-shadow);
      }
      .site-nav .nav-link[aria-current="page"]{
        background:linear-gradient(135deg,#fff4ec,#ffe6d9);
        border-color:#ffc9ae;
        color:#b24900;
        box-shadow:0 8px 20px rgba(255,106,0,.18);
      }

      .metrics .metric{
        background:var(--chip-bg);
        border-color:var(--chip-border);
        box-shadow:var(--chip-shadow);
        position:relative;
      }
      .metrics .metric svg{ color:var(--brand); }
      .metrics .metric::after{
        content:''; position:absolute; top:10px; right:12px;
        width:8px; height:8px; border-radius:999px; background:var(--brand);
        box-shadow:0 0 0 4px rgba(255,106,0,.12);
      }

      .quick-nav .qnav-item{
        background:var(--chip-bg);
        border-color:var(--chip-border);
        box-shadow:var(--chip-shadow);
      }
    }
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:'Inter', system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","DejaVu Sans",sans-serif;
      text-rendering:optimizeLegibility; -webkit-font-smoothing:antialiased;
    }
    a{color:var(--brand); text-decoration:none}
    a:hover{opacity:.9}
    header,footer{padding:12px 16px; border-bottom:1px solid var(--border)}
    footer{border-bottom:none;border-top:1px solid var(--border); margin-top:24px}
    .container{max-width:1180px;margin:0 auto;padding:0 16px}
    .muted{color:var(--muted)}
    .sr-only{position:absolute;left:-9999px}

    .hero{
      margin:12px 0 0; border-radius:20px; overflow:hidden; position:relative;
      background:
        linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55)),
        url('/assets/img/hero/home-hero.webp') center/cover no-repeat;
      min-height:240px;
      box-shadow:var(--shadow);
    }
    .hero-fallback{
      background:linear-gradient(135deg,#1f2937,#111827);
    }
    .hero-inner{padding:26px; color:#fff}
    .hero h1{margin:0 0 6px; font-size:28px; line-height:1.2}
    .hero p{margin:0 0 14px; opacity:.95}
    .cta{
      display:inline-flex; align-items:center; gap:8px;
      background:var(--brand); color:var(--brand-contrast);
      padding:10px 14px; border-radius:12px; font-weight:800; border:1px solid transparent;
    }
    .cta:hover{filter:brightness(1.05)}

    @media (max-width:540px){
      .hero{min-height:200px}
      .hero-inner{padding:18px}
      .hero h1{font-size:22px}
    }

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:var(--gap);margin:16px 0}
    .card{
      border:1px solid var(--border); border-radius:var(--radius);
      background:var(--card); overflow:hidden; display:flex; flex-direction:column;
      box-shadow:var(--shadow); transition:transform .15s ease; height:100%;
    }
    .card:hover{transform:translateY(-2px)}
    .card img{width:100%;aspect-ratio:1/1;object-fit:cover;background:#f7f7f7;height:auto}
    .card .body{padding:12px}
    .name,.product-title{
      display:block !important; font-size:16px; line-height:1.35; margin:0 0 6px;
      -webkit-line-clamp:2; display:-webkit-box; -webkit-box-orient:vertical; overflow:hidden; min-height:2.7em;
    }
    .price{font-weight:800;margin:4px 0 10px}
    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .buy{
      display:inline-block; width:100%; text-align:center;
      padding:10px 12px; border-radius:12px; font-weight:800;
      text-decoration:none; color:#fff; border:1px solid transparent; margin-top:auto;
      background:var(--brand); border-color:var(--brand);
    }
    .buy[data-merchant="shopee"]{ background:#ee4d2d; border-color:#ee4d2d }
    .buy[data-merchant="lazada"]{ background:#0f146d; border-color:#0f146d }
    .buy[data-merchant="tiki"]  { background:#1a94ff; border-color:#1a94ff }
    .buy[data-merchant="tiktok"]{ background:#000;    border-color:#000 }
    .buy:hover{ filter:brightness(1.05) }

    .quick-nav{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin:12px 0 0}
    .qnav-item{
      display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--border);
      border-radius:14px;background:var(--card);box-shadow:var(--shadow);color:var(--text);
      text-decoration:none
    }
    .qnav-item:hover{background:rgba(255,106,0,.06)}
    .qnav-item img{width:28px;height:28px;border-radius:8px}

    .skeleton{position:relative;overflow:hidden;background:linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.12) 37%, rgba(0,0,0,0.06) 63%)}
    .skeleton::after{content:'';position:absolute;inset:0;animation:shimmer 1.4s infinite}
    @keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
    .nav-link{ padding:8px 10px; border-radius:10px; color:var(--text); text-decoration:none; }
    .nav-link:hover{ background:rgba(255,106,0,.08) }
    .nav-link[aria-current="page"]{ background:#fff4ec; color:#b24900 }
    .fc{position:fixed; right:16px; bottom:16px; display:flex; flex-direction:column; gap:10px; z-index:1000}
    .fab{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow);cursor:pointer}
    .fab svg{width:22px;height:22px}
    .fab-brand{background:var(--brand); border-color:var(--brand); color:var(--brand-contrast)}
    .fab:hover{filter:brightness(1.02)}
    .fab-top{display:none}

    .metrics{margin:16px 0 8px}
    .metrics-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}
    .metric{display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--card);box-shadow:var(--shadow)}
    .metric svg{width:22px;height:22px}
    .metric span{color:var(--muted);font-size:13px}

    .floating-contacts{
      position:fixed;right:12px;bottom:calc(16px + env(safe-area-inset-bottom));
      display:flex;flex-direction:column;gap:12px;z-index:40;pointer-events:none;
    }
    .floating-contacts a,
    .floating-contacts button{
      pointer-events:auto;width:52px;height:52px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      background:#111;color:#fff;box-shadow:0 6px 18px rgba(0,0,0,.18);
    }
    body.has-fixed-cta .floating-contacts{ bottom:112px }

    :root{
      --brand-2:#ffb703;
      --brand-3:#ff914d;
      --chip-bg:linear-gradient(135deg, rgba(255,106,0,.12), rgba(255,183,3,.10));
      --chip-border:#ffcfb6;
      --chip-shadow:0 8px 22px rgba(0,0,0,.16);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --chip-bg:linear-gradient(135deg, rgba(255,106,0,.10), rgba(255,183,3,.08));
        --chip-border:#3b2a1f;
        --chip-shadow:0 10px 28px rgba(0,0,0,.22);
      }
    }

    .site-nav .nav-link{
      border:1px solid transparent; border-radius:12px;
      transition:background .15s, box-shadow .15s, border-color .15s;
    }
    .site-nav .nav-link:hover{
      background:var(--chip-bg) !important;
      border-color:var(--chip-border) !important;
      box-shadow:var(--chip-shadow) !important;
    }
    .site-nav .nav-link[aria-current="page"]{
      background:linear-gradient(135deg,#fff0e6,#ffe6d9) !important;
      border-color:#ffcfb6 !important;
      color:#b24900 !important;
      box-shadow:0 8px 20px rgba(255,106,0,.20) !important;
    }

    .metrics .metric{
      background:var(--chip-bg) !important;
      border-color:var(--chip-border) !important;
      box-shadow:var(--chip-shadow) !important;
      position:relative;
    }
    .metrics .metric svg{ color:var(--brand) !important; }
    .metrics .metric::after{
      content:''; position:absolute; top:10px; right:12px;
      width:8px; height:8px; border-radius:999px; background:var(--brand);
      box-shadow:0 0 0 4px rgba(255,106,0,.14);
    }

    .quick-nav .qnav-item{
      background:var(--chip-bg) !important;
      border-color:var(--chip-border) !important;
      box-shadow:var(--chip-shadow) !important;
    }

    :root{
      --nav-blue-1:#1746ff;
      --nav-blue-2:#1a94ff;
      --nav-blue-ring:rgba(255,255,255,.18);
    }

    .site-nav{
      background:linear-gradient(135deg,var(--nav-blue-1),var(--nav-blue-2)) !important;
      padding:6px 10px !important;
      border-radius:14px !important;
      border:1px solid var(--nav-blue-ring) !important;
      box-shadow:0 10px 24px rgba(23,70,255,.20) !important;
    }

    .site-nav .nav-link{
      color:#fff !important;
      border-color:transparent !important;
      background:transparent !important;
    }
    .site-nav .nav-link:hover{
      background:rgba(255,255,255,.14) !important;
    }
    .site-nav .nav-link[aria-current="page"]{
      background:rgba(255,255,255,.22) !important;
      color:#fff !important;
    }

  </style>

  <!-- 1) GA4 -->
  <script defer src="/assets/analytics.js"></script>
  <!-- 2) Affiliate -->
  <script defer src="/assets/mxd-affiliate.js"></script>
  <!-- 3) Engine store (cho c√°c trang m·ª•c, kh√¥ng ·∫£nh h∆∞·ªüng index) -->
  <script defer src="/assets/mxd-store.v2.js"></script>

  <!-- JSON-LD Organization -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"MXD",
    "url":"https://mxd210.github.io/",
    "logo":"https://mxd210.github.io/assets/img/og/home.webp",
    "sameAs":["https://www.facebook.com/mxd6686"],
    "contactPoint":[{"@type":"ContactPoint","telephone":"+84-338-328-898","contactType":"customer service","areaServed":"VN","availableLanguage":["vi","en"]}]
  }
  </script>
  <script defer src="/assets/js/floating-contact.js?v=2025-09-26-1"></script>
</head>
<body>
  <header style="position:sticky;top:0;z-index:50;background:var(--bg);backdrop-filter:blur(6px)">
    <div class="container" style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;padding:12px 16px;border-bottom:1px solid var(--border)">
      <a href="/" class="brand" style="font-weight:900;font-size:20px;color:var(--text);text-decoration:none">MXD</a>
      <nav class="site-nav" style="display:flex;gap:10px;margin-left:auto;flex-wrap:wrap">
        <a href="/"                  class="nav-link" aria-current="page">Trang ch·ªß</a>
        <a href="/store.html"        class="nav-link">C·ª≠a h√†ng</a>
        <a href="/blog/"             class="nav-link">Tin t·ª©c</a>
        <a href="/tu-van.html"       class="nav-link">T∆∞ v·∫•n</a>
        <!-- MXD-ANCHOR:NAV-CONG-CU -->
        <a href="/cong-cu/"          class="nav-link">C√¥ng c·ª•</a>
        <a href="/lien-he.html"      class="nav-link">Li√™n h·ªá</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero" aria-label="Hero" id="hero">
      <div class="hero-inner">
        <h1>MXD ‚Äî Trung t√¢m mua s·∫Øm ƒëa ng√†nh</h1>
        <p>ƒê·∫ßy ƒë·ªß c√¥ng c·ª• thi c√¥ng, ph·ª• ki·ªán, th·ªùi trang & ƒë·ªì gia d·ª•ng, ƒê·ªì ƒêi·ªán t·ª≠.</p>
        <a class="cta" href="/store.html" aria-label="Xem C·ª≠a h√†ng">Kh√°m ph√° c·ª≠a h√†ng
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M5 12h12M13 5l7 7-7 7"/></svg>
        </a>
      </div>
    </section>
    <script>
      (function(){
        const hero = document.getElementById('hero');
        const img = new Image();
        img.onload = () => {};
        img.onerror = () => hero.classList.add('hero-fallback');
        img.src = '/assets/img/hero/home-hero.webp';
      })();
    </script>

    <!-- METRICS -->
    <section class="metrics" aria-label="Ch·ªâ s·ªë d·ªãch v·ª•">
      <div class="metrics-grid">
        <div class="metric">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M3 12l7 7 11-11"/></svg>
          <div><strong>Mi·ªÖn ph√≠ v·∫≠n chuy·ªÉn</strong><span>tu·ª≥ ch√≠nh s√°ch nh√† b√°n</span></div>
        </div>
        <div class="metric">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 3l4 8H8l4-8zm0 18a2 2 0 100-4 2 2 0 000 4z"/></svg>
          <div><strong>Giao nhanh</strong><span>∆∞u ti√™n h√†ng n·ªôi ƒë·ªãa</span></div>
        </div>
        <div class="metric">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 1l3 7h7l-6 4 2 7-6-4-6 4h7z"/></svg>
          <div><strong>H√†ng ch·ªçn l·ªçc</strong><span>ƒë√°ng ti·ªÅn ‚Äì d·ªÖ mua</span></div>
        </div>
        <div class="metric">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M5 4h14v14H5zM9 8h6v6H9z"/></svg>
          <div><strong>B·∫£o h√†nh</strong><span>theo ch√≠nh s√°ch t·ª´ng h√£ng</span></div>
        </div>
      </div>
    </section>

    <!-- QUICK-NAV -->
    <section aria-label="Danh m·ª•c nhanh" style="margin-top:12px">
      <ul class="quick-nav" id="quick-nav">
        <li>
          <a href="/store/noi-bat.html" class="qnav-item">
            <img src="/assets/img/categories/noi-bat.webp" alt="S·∫£n ph·∫©m n·ªïi b·∫≠t ‚Äî MXD" width="28" height="28"
                 onerror="this.src='/assets/img/categories/placeholder.webp'"> S·∫£n ph·∫©m n·ªïi b·∫≠t
          </a>
        </li>
        <li>
          <a href="/store/may-moc-xay-dung.html" class="qnav-item">
            <img src="/assets/img/categories/may-moc-xay-dung.webp" alt="M√°y m√≥c x√¢y d·ª±ng ‚Äî MXD" width="28" height="28"
                 onerror="this.src='/assets/img/categories/placeholder.webp'"> M√°y m√≥c x√¢y d·ª±ng
          </a>
        </li>
        <li>
          <a href="/store/thoi-trang.html" class="qnav-item">
            <img src="/assets/img/categories/thoi-trang.webp" alt="Th·ªùi trang ‚Äî MXD" width="28" height="28"
                 onerror="this.src='/assets/img/categories/placeholder.webp'"> Th·ªùi trang
          </a>
        </li>
        <li>
          <a href="/store/do-gia-dung.html" class="qnav-item">
            <img src="/assets/img/categories/do-gia-dung.webp"
                 alt="ƒê·ªì gia d·ª•ng ‚Äî MXD" width="28" height="28"
                 onerror="this.src='/assets/img/categories/placeholder.webp'"> ƒê·ªì gia d·ª•ng
          </a>
        </li>
        <li>
          <a href="/store/do-dien-tu.html" class="qnav-item">
            <img src="/assets/img/categories/do-dien-tu.webp"
                 alt="ƒê·ªì ƒëi·ªán t·ª≠ ‚Äî MXD" width="28" height="28"
                 onerror="this.src='/assets/img/categories/placeholder.webp'"> ƒê·ªì ƒëi·ªán t·ª≠
          </a>
        </li>
        <li>
          <a href="/store/my-pham.html" class="qnav-item">
            <img src="/assets/img/categories/my-pham.webp" alt="M·ªπ ph·∫©m ‚Äî MXD" width="28" height="28"
                 onerror="this.src='/assets/img/categories/placeholder.webp'"> M·ªπ ph·∫©m
          </a>
        </li>
      </ul>
    </section>

    <!-- S·∫¢N PH·∫®M (affiliates.json) -->
    <h2 style="margin:16px 0 0">S·∫£n ph·∫©m m·ªõi</h2>
    <div id="product-list" class="grid" aria-live="polite"></div>
    <p id="empty" class="muted" style="display:none">
      Ch∆∞a c√≥ s·∫£n ph·∫©m. H√£y th√™m <code>/assets/data/affiliates.json</code> (ngu·ªìn chu·∫©n) ho·∫∑c <code>/products.json</code> (fallback).
    </p>
    <noscript>Trang c·∫ßn JavaScript ƒë·ªÉ hi·ªÉn th·ªã danh s√°ch s·∫£n ph·∫©m.</noscript>

    <!-- M·ªöI C·∫¨P NH·∫¨T -->
    <h2 style="margin:24px 0 0">M·ªõi c·∫≠p nh·∫≠t</h2>
    <div id="updated-list" class="grid" aria-live="polite"></div>
    <p id="updated-empty" class="muted" style="display:none">Ch∆∞a c√≥ s·∫£n ph·∫©m m·ªõi c·∫≠p nh·∫≠t.</p>
  </main>

  <footer>
    <div class="container">
      ¬© MXD ¬∑ <a href="/chinh-sach/bao-mat.html">B·∫£o m·∫≠t</a> ¬∑ <a href="/chinh-sach/doi-tra.html">ƒê·ªïi tr·∫£</a> ¬∑ <a href="/chinh-sach/bao-hanh.html">B·∫£o h√†nh</a>
    </div>
  </footer>

  <script>
    window.MXD_RENDER = window.MXD_RENDER || {};
    window.MXD_RENDER.source = '/assets/data/affiliates.json';
    window.MXD_RENDER.limit = 60;
  </script>

  <!-- Render s·∫£n ph·∫©m (affiliates.json) -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const wrap  = document.querySelector('#product-list');
      const empty = document.getElementById('empty');
      if (!wrap) return;

      const money = n => Number.isFinite(+n)
        ? new Intl.NumberFormat('vi-VN').format(+n) + '‚Ç´'
        : '';
      const esc = s => String(s || '').replace(/[&<>"']/g, c => (
        {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]
      ));

      wrap.innerHTML = Array.from({length: 6}).map(() => `
        <article class="card">
          <div class="skeleton" style="height:200px"></div>
          <div class="body">
            <div class="skeleton" style="height:18px"></div>
            <div class="skeleton" style="height:16px;width:40%;margin-top:8px"></div>
          </div>
        </article>
      `).join('');

fetch('/assets/data/affiliates.json', { cache: 'no-store' })
  .then(r => r.ok ? r.json() : [])
  .then(all => {
    const arr = Array.isArray(all) ? all : (all.items || []);
    if (!arr.length) {
      if (empty) empty.style.display = 'block';
      wrap.innerHTML = '';
      return;
    }

    const LIMIT = (window.MXD_RENDER && window.MXD_RENDER.limit) || 60;
    const fmt = n => isFinite(+n)
      ? new Intl.NumberFormat('vi-VN').format(+n) + '‚Ç´'
      : '';

    // üî• NEW: ƒë·∫£o m·∫£ng ƒë·ªÉ ∆∞u ti√™n s·∫£n ph·∫©m m·ªõi th√™m (th∆∞·ªùng n·∫±m cu·ªëi file)
    const list = arr.slice().reverse();

    wrap.innerHTML = list.slice(0, LIMIT).map(p => {
      const rawSku  = (p.sku || '').toString();
      const skuSlug = rawSku.toLowerCase();
      const name    = p.name || rawSku || 'S·∫£n ph·∫©m';

      const originRaw = (p.origin_url || p.origin || p.url || p.link || '').toString().trim();
      const hasDeeplink = typeof p.deeplink === 'string' &&
        /go\.isclix\.com\/deep_link/i.test(p.deeplink);

      const hrefInitial = hasDeeplink
        ? p.deeplink
        : (originRaw || '#');

      const merchant   = (p.merchant || '').toLowerCase();
      const priceHtml  = p.price
        ? `<div class="price" data-price="${p.price}">${fmt(p.price)}</div>`
        : '';

      const detailHref = rawSku
        ? `/g.html?sku=${encodeURIComponent(rawSku)}`
        : '#';

      const noAffAttr   = hasDeeplink ? ' data-no-aff="1"' : '';
      const originAttr  = !hasDeeplink && originRaw
        ? ` data-origin-url="${originRaw}"`
        : '';

      return `
        <article class="card">
          <a class="product-meta sr-only"
             href="${hrefInitial}"
             data-merchant="${merchant}"
             data-sku="${rawSku}"${originAttr}${noAffAttr}>
            ${name}
          </a>

          <a href="${detailHref}" aria-label="Xem chi ti·∫øt ${name}">
            <img loading="lazy" decoding="async"
                 src="/assets/img/products/${skuSlug || 'placeholder'}.webp"
                 alt="${name}"
                 onerror="this.onerror=null;this.src='/assets/img/products/placeholder.webp'">
          </a>
          <div class="body">
            <h3 class="name"><a href="${detailHref}">${name}</a></h3>
            ${priceHtml}
            <div class="actions">
              <a class="buy"
                 href="${hrefInitial}"
                 data-merchant="${merchant}"
                 data-sku="${rawSku}"${originAttr}${noAffAttr}
                 target="_blank"
                 rel="nofollow sponsored noopener">
                Mua ngay
              </a>
            </div>
          </div>
        </article>`;
    }).join('');

    if (window.mxdAffiliate && typeof window.mxdAffiliate.scan === 'function') {
      window.mxdAffiliate.scan(wrap);
    }
  })
  .catch(() => {
    if (empty) empty.style.display = 'block';
    wrap.innerHTML = '';
  });


          if (window.mxdAffiliate && typeof window.mxdAffiliate.scan === 'function') {
            // Qu√©t trong v√πng product-list ƒë·ªÉ sinh isclix, gi·ªëng h·ªát c√°ch g.html ƒëang l√†m
            window.mxdAffiliate.scan(wrap);
          }
        })
        .catch(() => {
          if (empty) empty.style.display = 'block';
          wrap.innerHTML = '';
        });

      // DEDUPE floating contacts (n·∫øu script ngo√†i c√≥ inject)
      const fcs = document.querySelectorAll('#floating-contacts,.floating-contacts,.fc');
      if (fcs.length > 1) fcs.forEach((el, i) => i > 0 && el.remove());
    });

    addEventListener('scroll', () => {
      const toTop = document.getElementById('toTop');
      if (!toTop) return;
      toTop.style.display = scrollY > 400 ? 'flex' : 'none';
    }, { passive:true });
    document.getElementById('toTop')?.addEventListener('click', () => scrollTo({ top:0, behavior:'smooth' }));
  </script>

  <!-- M·ªöI C·∫¨P NH·∫¨T + JSON-LD ItemList (products.json) -->
  <script>
    (function(){
      const updatedWrap   = document.getElementById('updated-list');
      const updatedEmpty  = document.getElementById('updated-empty');
      if (!updatedWrap) return;

      const money = n => Number.isFinite(+n)
        ? new Intl.NumberFormat('vi-VN').format(+n) + '‚Ç´'
        : '';
      const esc   = s => String(s||'').replace(/[&<>"']/g, c => (
        {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]
      ));
      const abs   = (u) => {
        if (!u) return '';
        try {
          const url = new URL(u, location.origin);
          if (url.origin === location.origin && u.startsWith('/')) return 'https://mxd210.github.io' + u;
          return url.href;
        } catch { return ''; }
      };
      const parseDate = s => { const t = Date.parse(s); return isNaN(t) ? null : t; };

      function render(list){
        if (!list.length){
          updatedEmpty.style.display='block';
          updatedWrap.innerHTML='';
          return;
        }
        updatedWrap.innerHTML = list.map(p=>{
          const sku  = (p.sku||'').toLowerCase();
          const name = p.name || sku || 'S·∫£n ph·∫©m';

          const originRaw = (p.origin_url || p.origin || p.url || p.link || '').toString().trim();
          const deeplinkFromJson = (typeof p.deeplink === 'string' &&
            /go\.isclix\.com\/deep_link/i.test(p.deeplink))
            ? p.deeplink.toString().trim()
            : '';

          let buy        = '#';
          let originAttr = '';
          let noAffAttr  = '';

          if (originRaw) {
            buy        = originRaw;
            originAttr = ` data-origin-url="${esc(originRaw)}"`;
          } else if (deeplinkFromJson) {
            buy       = deeplinkFromJson;
            noAffAttr = ' data-no-aff="1"';
          }

          const priceHtml = Number.isFinite(+p.price)
            ? `<div class="price">${money(+p.price)}</div>`
            : '';
          const img          = p.image || `/assets/img/products/${sku}.webp`;
          const merchantAttr = (p.merchant || '').toLowerCase();

          return `
            <article class="card">
              <a href="${esc(buy)}"
                 target="_blank"
                 rel="nofollow sponsored noopener"
                 aria-label="Mua ${esc(name)}"
                 data-merchant="${esc(merchantAttr)}"${originAttr}${noAffAttr}>
                <img loading="lazy" decoding="async"
                     src="${esc(img)}" alt="${esc(name)}"
                     onerror="this.onerror=null;this.src='/assets/img/products/placeholder.webp'">
              </a>
              <div class="body">
                <h3 class="name">
                  <a href="${esc(buy)}"
                     target="_blank"
                     rel="nofollow noopener"
                     data-merchant="${esc(merchantAttr)}"${originAttr}${noAffAttr}>
                    ${esc(name)}
                  </a>
                </h3>
                ${priceHtml}
                <div class="actions">
                  <a class="buy"
                     data-merchant="${esc(merchantAttr)}"
                     href="${esc(buy)}"
                     target="_blank"
                     rel="nofollow sponsored noopener"${originAttr}${noAffAttr}>
                    Mua ngay
                  </a>
                </div>
              </div>
            </article>`;
        }).join('');

        if (window.mxdAffiliate && typeof window.mxdAffiliate.scan === 'function') {
          window.mxdAffiliate.scan(updatedWrap);
        }
      }

      function injectJSONLD(list){
        if (!list.length) return;
        const itemList = {
          "@context":"https://schema.org",
          "@type":"ItemList",
          "name":"M·ªõi c·∫≠p nh·∫≠t ‚Äî MXD",
          "url":"https://mxd210.github.io/",
          "itemListElement": list.map((p, i) => {
            const url = p.deeplink || p.origin || 'https://mxd210.github.io/';
            const product = {
              "@type":"Product",
              "name": p.name || p.sku || "S·∫£n ph·∫©m",
              "image": abs(p.image || `/assets/img/products/${(p.sku||'').toLowerCase()}.webp`),
              "url": url
            };
            if (Number.isFinite(+p.price)) {
              product.offers = {
                "@type":"Offer",
                "priceCurrency":"VND",
                "price": String(+p.price),
                "availability":"https://schema.org/InStock",
                "url": url
              };
            }
            if (p.brand) product.brand = { "@type":"Brand", "name": String(p.brand) };
            return { "@type":"ListItem", "position": i+1, "url": url, "item": product };
          })
        };
        const tag = document.createElement('script');
        tag.type = 'application/ld+json';
        tag.textContent = JSON.stringify(itemList);
        document.head.appendChild(tag);
      }

      fetch('/products.json', { cache:'no-store' })
        .then(r => r.ok ? r.json() : [])
        .then(all => {
          const list = (Array.isArray(all) ? all : [])
            .filter(p => p && p.status && parseDate(p.updated_at));
          list.sort((a,b) => parseDate(b.updated_at) - parseDate(a.updated_at));
          const top = list.slice(0, 8);
          render(top);
          injectJSONLD(top);
        })
        .catch(() => {
          updatedEmpty.style.display='block';
          updatedWrap.innerHTML='';
        });
    })();
  </script>

  <script defer src="/assets/js/floating-contact.js"></script>

  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js', { updateViaCache: 'none' })
      .then(reg => {
        if (reg.waiting) reg.waiting.postMessage('SKIP_WAITING');
        reg.addEventListener('updatefound', () => {
          const nw = reg.installing;
          nw && nw.addEventListener('statechange', () => {
            if (nw.state === 'installed' && navigator.serviceWorker.controller) {
              reg.waiting && reg.waiting.postMessage('SKIP_WAITING');
            }
          });
        });
      });
    navigator.serviceWorker.addEventListener('controllerchange', () => location.reload());
  }
  </script>

  <!-- MTE:TRACKING -->
</body>
</html>
<!-- /FILE -->
