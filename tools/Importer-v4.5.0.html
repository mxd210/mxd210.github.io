<!-- REPLACE WHOLE FILE: /tools/Importer v4.5.0.html -->
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover"/>
  <title>MXD Importer v4.5.0 ‚Äî Mobile PRO</title>
  <meta name="robots" content="noindex,follow"/>
  <style>
    :root{
      --bg:#0b0f14;--fg:#e8f0fb;--muted:#a7b4c2;--b:#152132;--accent:#7cc4ff;
      --ok:#34d399;--warn:#f59e0b;--err:#ef4444;--chip:#223043;--line:#1c2938;
    }
    *{box-sizing:border-box} html,body{margin:0} body{background:var(--bg);color:var(--fg);font:14px/1.45 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    h1{font-size:16px;margin:16px 12px}
    .wrap{max-width:1100px;margin:0 auto;padding:8px 10px 80px}
    .bar{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin:8px 0 12px}
    .pill{background:var(--chip);padding:5px 10px;border-radius:999px;font-size:12px}
    .grid{display:grid;gap:10px}
    @media(min-width:880px){.grid{grid-template-columns:1.1fr .9fr}}
    section{background:#0e1520;border:1px solid var(--line);border-radius:12px;padding:10px}
    section>h2{font-size:13px;margin:0 0 8px;color:#cde3ff;letter-spacing:.2px}
    textarea,input,select,button{width:100%;padding:10px;border-radius:10px;border:1px solid var(--b);background:#0b1622;color:var(--fg)}
    input::file-selector-button{background:var(--chip);border:0;color:#d9e8ff;padding:6px 10px;margin-right:8px;border-radius:8px}
    button{background:#173046;border:1px solid #1e3a56;cursor:pointer}
    button:hover{filter:brightness(1.05)}
    .btn-ok{background:linear-gradient(180deg,#1d684e,#144635);border-color:#15543f}
    .btn-warn{background:#3e2d12;border-color:#6d4a16;color:#ffd39a}
    .btn-err{background:#3a1518;border-color:#6a1c22}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .row>*{flex:1}
    .tiny{font-size:12px;color:var(--muted)}
    .k{display:inline-flex;gap:6px;align-items:center;background:var(--chip);border:1px solid #2b3e57;border-radius:8px;padding:6px 10px}
    .tbl{overflow:auto;border:1px solid var(--line);border-radius:10px}
    table{width:100%;border-collapse:collapse;min-width:760px}
    th,td{border-top:1px solid var(--line);padding:8px 10px;text-align:left}
    thead th{position:sticky;top:0;background:#0e1826;z-index:1}
    .thumbs{display:grid;grid-template-columns:repeat(auto-fit,minmax(84px,1fr));gap:8px}
    .thumb{border:1px dashed #2b455f;border-radius:10px;padding:6px;text-align:center;background:#0b1622}
    .thumb img{width:100%;height:72px;object-fit:cover;border-radius:8px}
    .stat{display:flex;gap:8px;flex-wrap:wrap}
    .stat b{color:#c9f3ff}
    .toast{position:fixed;left:10px;right:10px;bottom:12px;padding:10px;border-radius:12px;background:#0e1826;border:1px solid #25415c;color:#cde3ff}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .err{color:var(--err)}
    .hr{height:1px;background:var(--line);margin:10px 0}
    .mono{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px}
  </style>
</head>
<body>
<div class="wrap">
  <div class="bar">
    <h1>MXD Importer <span class="pill">v4.5.0</span></h1>
    <span class="pill">drop-in / 1 file</span>
    <span class="pill">GA4 tr∆∞·ªõc Affiliate</span>
    <span id="cfgState" class="tiny"></span>
  </div>

  <!-- 1. Nh·∫≠p d·ªØ li·ªáu + c·∫•u h√¨nh -->
  <section>
    <h2>1) Nh·∫≠p d·ªØ li·ªáu & c·∫•u h√¨nh</h2>
    <div class="row">
      <div>
        <label class="tiny">D√°n danh s√°ch (m·ªói d√≤ng: <b>T√™n | Gi√° | Link</b> ho·∫∑c ch·ªâ <b>Link</b>)</label>
        <textarea id="ta" rows="4" placeholder="T√™n s·∫£n ph·∫©m | 199000 | https://shopee.vn/..."></textarea>
        <div class="row" style="margin-top:8px">
          <button id="btnParse" class="btn-ok">1) Parse</button>
          <button id="btnExample">D√°n v√≠ d·ª•</button>
        </div>
      </div>
      <div>
        <label class="tiny">D√°n template isclix (Shopee/Lazada) n·∫øu mu·ªën t·ª± sinh deep-link:</label>
        <input id="tpl1" placeholder="https://go.isclix.com/deep_link/..."/>
        <input id="tpl2" placeholder="https://go.isclix.com/deep_link/..."/>
        <div class="row" style="margin-top:8px">
          <div class="k"><small>Brand (t√πy ch·ªçn)</small><input id="brandBox" placeholder="bosch / makite / ..."></div>
          <div class="k"><small>Danh m·ª•c</small><input id="catBox" placeholder="may-cat / phu-kien"></div>
          <div class="k"><small>Tr·∫°ng th√°i</small>
            <select id="statusBox"><option value="active">active</option><option value="inactive">inactive</option></select>
          </div>
          <div class="k"><label><input type="checkbox" id="featBox"> featured</label></div>
        </div>
      </div>
    </div>

    <div class="hr"></div>

    <!-- ·∫¢nh (gi·ªëng 4.3.8) -->
    <div class="grid">
      <div>
        <div class="row">
          <div class="k" style="flex:2"><small>·∫¢nh (.webp) ‚Äî k√©o & th·∫£ ho·∫∑c b·∫•m ƒë·ªÉ ch·ªçn</small></div>
          <div class="k"><small>Th∆∞ m·ª•c ·∫£nh</small><input id="imgDir" value="/assets/img/products/"></div>
        </div>
        <input id="filePick" type="file" accept=".webp" multiple style="margin:8px 0"/>
        <div id="thumbs" class="thumbs"></div>
        <div class="tiny" id="imgStat"></div>
        <div class="row" style="margin-top:8px">
          <button id="btnClearImgs" class="btn-err">X√≥a t·∫•t c·∫£ ·∫£nh</button>
          <button id="btnUploadImgs" class="btn-ok">Upload ·∫£nh ‚Üí Worker</button>
        </div>
      </div>
      <div>
        <div class="row">
          <div class="k" style="flex:2"><small>Worker Base</small><input id="workerBase" placeholder="https://mxd-control-v2.mxd6686.workers.dev"></div>
          <div class="k"><small>X-Key</small><input id="xKey" placeholder="mxd-2025-super"></div>
        </div>
        <div class="row" style="margin-top:8px">
          <button id="btnSaveCfg">L∆∞u c·∫•u h√¨nh</button>
          <button id="btnClearCfg" class="btn-err">X√≥a c·∫•u h√¨nh</button>
          <button id="btnHealth">Ki·ªÉm tra Worker</button>
        </div>
        <pre id="healthLog" class="mono tiny" style="min-height:52px;background:#0a1320;border:1px solid var(--line);border-radius:8px;padding:8px;overflow:auto"></pre>
      </div>
    </div>
  </section>

  <!-- 2. B·∫£ng d·ªØ li·ªáu -->
  <section>
    <h2>2) B·∫£ng d·ªØ li·ªáu</h2>
    <div class="tbl">
      <table id="tbl">
        <thead>
          <tr>
            <th style="width:38px"><input type="checkbox" id="checkAll"></th>
            <th>T√™n</th>
            <th style="width:110px">Gi√°</th>
            <th style="width:120px">Merchant</th>
            <th style="width:140px">Brand</th>
            <th style="width:220px">SKU</th>
            <th style="width:120px">·∫¢nh</th>
            <th>Link g·ªëc</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="row" style="margin-top:8px">
      <button id="btnDelSel" class="btn-err">X√≥a SELECT</button>
      <button id="btnFixSku" class="btn-warn">S·ª≠a SKU l·ªói</button>
    </div>
    <div id="rowStat" class="tiny stat" style="margin-top:6px"></div>
  </section>

  <!-- 3. Health-check & Xu·∫•t JSON/HTML -->
  <section>
    <h2>3) Health-check & Xu·∫•t JSON</h2>
    <div class="row">
      <button id="btnCheck" class="btn-ok">Ch·∫°y ki·ªÉm tra</button>
      <button id="btnJson">T·∫°o JSON</button>
      <button id="btnSnippet">T·∫°o Snippet HTML</button>
      <button id="btnCopy">Copy</button>
      <button id="btnDl">T·∫£i xu·ªëng</button>
    </div>
    <pre id="out" class="mono" style="margin-top:8px;min-height:120px;background:#0a1320;border:1px solid var(--line);border-radius:8px;padding:10px"></pre>
  </section>

  <!-- 4. Worker t√≠ch h·ª£p ‚Äî H√†ng ƒë·ª£i & Publish -->
  <section>
    <h2>4) Worker t√≠ch h·ª£p ‚Äî H√†ng ƒë·ª£i & Publish</h2>
    <div class="row" style="margin-bottom:8px">
      <button id="btnStatus">Status</button>
      <button id="btnQueueStore" class="btn-ok">ƒê·∫©y SELECT ‚Üí Store</button>
      <button id="btnQueueFeat" class="btn-ok">ƒê·∫©y SELECT ‚Üí N·ªïi b·∫≠t</button>
      <input id="commitMsg" placeholder="feat(data): add <n> products (category: ... )">
    </div>
    <pre id="queueLog" class="mono tiny" style="min-height:72px;background:#0a1320;border:1px solid var(--line);border-radius:8px;padding:8px;white-space:pre-wrap"></pre>
  </section>
</div>

<div id="toast" class="toast" style="display:none"></div>

<script>
(function(){
  // ---------- Utilities ----------
  const $ = s=>document.querySelector(s);
  const $$ = s=>Array.from(document.querySelectorAll(s));
  const on = (el,ev,fn)=>el.addEventListener(ev,fn);
  const slug = t=>t.toLowerCase()
      .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
      .replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,'').slice(0,96);
  const fmt = n=>Number(n||0).toLocaleString('vi-VN');
  const show = (id,msg,cls='')=>{
    const b=$("#toast"); b.innerHTML=msg; b.style.display='block';
    b.className='toast '+cls; setTimeout(()=>b.style.display='none',2500);
  };
  const cfgKey='mxd-importer-v45';
  const saveCfg=()=>{
    const cfg={
      workerBase: $("#workerBase").value.trim(),
      xkey: $("#xKey").value.trim(),
      imgDir: $("#imgDir").value.trim(),
      tpl1: $("#tpl1").value.trim(),
      tpl2: $("#tpl2").value.trim(),
      brand: $("#brandBox").value.trim(),
      cat: $("#catBox").value.trim(),
      status: $("#statusBox").value,
      feat: $("#featBox").checked
    };
    localStorage.setItem(cfgKey, JSON.stringify(cfg));
    $("#cfgState").textContent = "CFG: saved";
    return cfg;
  };
  const loadCfg=()=>{
    try{
      const cfg=JSON.parse(localStorage.getItem(cfgKey)||'{}');
      if(cfg.workerBase) $("#workerBase").value=cfg.workerBase;
      if(cfg.xkey) $("#xKey").value=cfg.xkey;
      if(cfg.imgDir) $("#imgDir").value=cfg.imgDir;
      if(cfg.tpl1) $("#tpl1").value=cfg.tpl1;
      if(cfg.tpl2) $("#tpl2").value=cfg.tpl2;
      if(cfg.brand) $("#brandBox").value=cfg.brand;
      if(cfg.cat) $("#catBox").value=cfg.cat;
      if(cfg.status) $("#statusBox").value=cfg.status;
      if(typeof cfg.feat==='boolean') $("#featBox").checked=cfg.feat;
      $("#cfgState").textContent = "CFG: loaded";
    }catch(e){}
  };

  // ---------- Data ----------
  let rows=[];                 // [{name,price,origin,merchant,brand,category,status,featured,sku,imgFile?}]
  let imgMap=new Map();        // sku -> File
  const guessMerchant=(url)=>{
    try{
      const h=new URL(url).hostname;
      if(/shopee/i.test(h)) return 'shopee';
      if(/lazada/i.test(h)) return 'lazada';
      if(/tiki/i.test(h)) return 'tiki';
      if(/tiktok/i.test(h)) return 'tiktok';
    }catch(e){}
    return 'shopee';
  };

  // ---------- Table render ----------
  function render(){
    const tb=$("#tbl tbody"); tb.innerHTML='';
    rows.forEach((r,i)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`
        <td><input type="checkbox" class="pick" data-i="${i}"></td>
        <td contenteditable="true" data-f="name">${r.name}</td>
        <td contenteditable="true" data-f="price" style="min-width:90px">${r.price||''}</td>
        <td>
          <select data-f="merchant">
            ${['shopee','lazada','tiki','tiktok'].map(m=>`<option value="${m}" ${m===r.merchant?'selected':''}>${m}</option>`).join('')}
          </select>
        </td>
        <td contenteditable="true" data-f="brand">${r.brand||''}</td>
        <td contenteditable="true" data-f="sku" class="mono">${r.sku||''}</td>
        <td class="mono">${imgMap.has(r.sku)?'üñºÔ∏è '+(imgMap.get(r.sku).name||''):'(ch∆∞a c√≥)'}</td>
        <td contenteditable="true" data-f="origin" class="mono">${r.origin||''}</td>`;
      tb.appendChild(tr);
    });
    $("#rowStat").innerHTML = `<b>H√†ng:</b> ${rows.length} ‚Ä¢ <b>T·ªïng gi√°:</b> ${fmt(rows.reduce((s,r)=>s+Number(r.price||0),0))} ‚Ä¢ <b>ƒê√£ ch·ªçn:</b> ${$$('.pick:checked').length}`;
    // attach cell edits
    tb.querySelectorAll('[contenteditable="true"],select').forEach(el=>{
      on(el,'input',()=>{
        const tr=el.closest('tr'); const i=[...tr.parentNode.children].indexOf(tr);
        const f=el.getAttribute('data-f'); let v=el.tagName==='SELECT'?el.value:el.textContent.trim();
        if(f==='price') v=v.replace(/[^\d]/g,'');
        rows[i][f]=v;
        if(f==='name' && !rows[i].sku) rows[i].sku=slug(v);
        render(); // refresh image cell & stats
      });
    });
  }
  on($("#checkAll"),'change',e=> $$('.pick').forEach(c=>c.checked=e.target.checked));

  // ---------- Parse ----------
  on($("#btnExample"),'click',()=>{
    $("#ta").value = [
      "M√°y c·∫Øt g·∫°ch Dekton 110 | 1190000 | https://shopee.vn/‚Ä¶",
      "√Åo kho√°c ch·ªëng n·∫Øng Cardigan | 199000 | https://www.lazada.vn/products/‚Ä¶",
      "https://tiki.vn/san-pham-abc.html"
    ].join("\n");
  });
  on($("#btnParse"),'click',()=>{
    const cfg=saveCfg();
    const lines=$("#ta").value.split(/\n/).map(s=>s.trim()).filter(Boolean);
    const add=[]; for(const ln of lines){
      let name='',price='',origin='';
      const parts=ln.split('|').map(s=>s.trim());
      if(parts.length===1){ origin=parts[0] }
      if(parts.length>=2){ name=parts[0]; price=(parts[1]||'').replace(/[^\d]/g,''); origin=parts.slice(2).join('|')||'' }
      const merchant=guessMerchant(origin);
      const sku=slug(name||origin.split('/').pop().split('?')[0]);
      add.push({name,price,origin,merchant,
                brand:cfg.brand||'',category:cfg.cat||'',
                status:cfg.status||'active',featured:!!cfg.feat,sku});
    }
    rows = add.concat(rows);
    render();
    show('toast',`ƒê√£ parse ${add.length} d√≤ng.`,`ok`);
  });

  // ---------- Images ----------
  const thumbs=$("#thumbs"), imgStat=$("#imgStat");
  function refreshThumbs(){
    thumbs.innerHTML='';
    let total=0;
    for(const [sku,file] of imgMap){
      total += file.size||0;
      const url=URL.createObjectURL(file);
      const div=document.createElement('div'); div.className='thumb';
      div.innerHTML=`<div class="tiny mono">${sku}.webp</div><img src="${url}" alt="${sku}"/>`;
      thumbs.appendChild(div);
    }
    imgStat.innerHTML = imgMap.size
      ? `<span class="ok">ƒê√£ ch·ªçn ${imgMap.size} ·∫£nh</span> ‚Ä¢ dung l∆∞·ª£ng ~ ${(total/1024).toFixed(0)} KB`
      : `<span class="warn">Ch∆∞a ch·ªçn ·∫£nh</span>`;
  }
  on($("#filePick"),'change',e=>{
    [...e.target.files].forEach(f=>{
      // c·ªë l·∫•y sku t·ª´ t√™n file, n·∫øu kh√¥ng c√≥ th√¨ b·∫£n ƒë·ªì s·∫Ω g·∫Øn sau
      let base=f.name.replace(/\.webp$/i,'');
      imgMap.set(slug(base), f);
    });
    refreshThumbs(); render();
  });
  on($("#btnClearImgs"),'click',()=>{ imgMap.clear(); refreshThumbs(); render(); });

  // ---------- Health check / JSON / Snippet ----------
  function check(){
    const miss=[];
    rows.forEach(r=>{ if(!imgMap.has(r.sku)) miss.push(r.sku); });
    const ok=rows.length && miss.length===0;
    $("#out").textContent = ok
      ? `‚úì OK ‚Äî ${rows.length} h√†ng, ${imgMap.size} ·∫£nh kh·ªõp SKU.`
      : `‚ö† Thi·∫øu ·∫£nh cho SKU: ${miss.join(', ')}`;
    show('toast', ok?'Health-check OK':'Thi·∫øu ·∫£nh, ki·ªÉm tra l·∫°i SKU/·∫£nh', ok?'ok':'warn');
  }
  on($("#btnCheck"),'click',check);

  function toJSON(items){
    const dir=($("#imgDir").value||'/assets/img/products/').replace(/\/+$/,'/') ;
    const now=new Date().toISOString().replace('T',' ').replace('Z','');
    return items.map(r=>({
      name:r.name, price:Number(r.price||0),
      origin:r.origin, image: dir + (r.sku||'') + '.webp',
      merchant:r.merchant, brand:r.brand||'',
      sku:r.sku, category:r.category||'',
      featured:!!r.featured, status:r.status||'active',
      updated_at: now, notes: r.notes||""
    }));
  }
  on($("#btnJson"),'click',()=>{
    const sel=getSelected();
    const js=JSON.stringify(toJSON(sel.length?sel:rows), null, 2);
    $("#out").textContent=js;
    show('toast','ƒê√£ t·∫°o JSON','ok');
  });
  on($("#btnSnippet"),'click',()=>{
    const sel=getSelected();
    const dir=($("#imgDir").value||'/assets/img/products/').replace(/\/+$/,'/') ;
    const html = (sel.length?sel:rows).map(r=>`
<li class="card">
  <a class="product-meta" href="${r.origin}" data-merchant="${r.merchant}" data-sku="${r.sku}"
     data-img="${dir}${r.sku}.webp" data-price="${r.price||''}">${r.name}</a>
  <a class="buy" href="${r.origin}">Xem h√†ng</a>
</li>`).join('\n');
    $("#out").textContent=html.trim();
    show('toast','ƒê√£ t·∫°o HTML snippet','ok');
  });
  on($("#btnCopy"),'click',async()=>{
    await navigator.clipboard.writeText($("#out").textContent||'');
    show('toast','ƒê√£ copy','ok');
  });
  on($("#btnDl"),'click',()=>{
    const blob=new Blob([$("#out").textContent||''],{type:'text/plain'});
    const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='output.txt'; a.click();
  });

  // ---------- Row helpers ----------
  function getSelected(){
    const picked=[]; $$('.pick').forEach((c,idx)=>{ if(c.checked) picked.push(rows[idx]); });
    return picked.length?picked:rows;
  }
  on($("#btnDelSel"),'click',()=>{
    const left=[]; $$('.pick').forEach((c,i)=>{ if(!c.checked) left.push(rows[i]); });
    rows=left; render();
  });
  on($("#btnFixSku"),'click',()=>{
    rows.forEach(r=> r.sku = slug(r.sku||r.name||'item') );
    render(); show('toast','ƒê√£ s·ª≠a SKU l·ªói','ok');
  });

  // ---------- Worker I/O ----------
  async function wFetch(path, opt={}){
    const base=$("#workerBase").value.trim(); const key=$("#xKey").value.trim();
    if(!base){ show('toast','Thi·∫øu Worker Base','err'); throw new Error('no worker'); }
    const url=base.replace(/\/$/,'') + path;
    opt.headers = Object.assign({'X-Key': key}, opt.headers||{});
    const r = await fetch(url, opt);
    return r;
  }
  on($("#btnHealth"),'click', async()=>{
    $("#healthLog").textContent='‚Ä¶';
    try{
      const r=await wFetch('/ops/health',{method:'GET'});
      $("#healthLog").textContent = r.status+' '+(await r.text()).slice(0,500);
      show('toast','Worker 200? xem khung log','ok');
    }catch(e){ $("#healthLog").textContent=String(e); show('toast','Health l·ªói','err'); }
  });
  on($("#btnStatus"),'click', async()=>{
    $("#queueLog").textContent='‚Ä¶';
    try{
      const r=await wFetch('/ops/status?channel=store',{method:'GET'});
      $("#queueLog").textContent = r.status+' '+(await r.text()).slice(0,1000);
    }catch(e){ $("#queueLog").textContent=String(e); }
  });

  // Upload ·∫£nh ƒë·ªôc l·∫≠p
  on($("#btnUploadImgs"),'click', async()=>{
    saveCfg();
    if(imgMap.size===0) return show('toast','Ch∆∞a c√≥ ·∫£nh','warn');
    const fd=new FormData();
    for(const [sku,file] of imgMap){
      const f=new File([file], `${sku}.webp`, {type:'image/webp'});
      fd.append('images[]', f, f.name);
    }
    fd.append('channel','images');
    fd.append('commit', 'chore(img): add '+imgMap.size+' images');
    $("#queueLog").textContent='Uploading images‚Ä¶';
    try{
      const r=await wFetch('/publish',{method:'POST', body:fd});
      $("#queueLog").textContent = 'Upload ·∫£nh ‚Üí ' + r.status + '\n' + (await r.text()).slice(0,1200);
      show('toast','Upload ·∫£nh xong','ok');
    }catch(e){ $("#queueLog").textContent=String(e); show('toast','Upload ·∫£nh l·ªói','err'); }
  });

  async function pushSelected(channel){
    saveCfg();
    const sel=getSelected(); if(!sel.length) return show('toast','Kh√¥ng c√≥ h√†ng ƒë·ªÉ push','warn');
    // k√®m ·∫£nh theo SELECT
    const fd=new FormData();
    // JSON items
    const itemsBlob=new Blob([JSON.stringify(toJSON(sel))],{type:'application/json'});
    fd.append('items', itemsBlob, 'items.json');
    // ·∫£nh
    for(const r of sel){
      if(imgMap.has(r.sku)){
        const f=imgMap.get(r.sku);
        const f2=new File([f], `${r.sku}.webp`, {type:'image/webp'});
        fd.append('images[]', f2, f2.name);
      }
    }
    fd.append('channel', channel);
    fd.append('commit', $("#commitMsg").value || `feat(data): add ${sel.length} products`);
    $("#queueLog").textContent='Pushing‚Ä¶';
    try{
      const r=await wFetch('/publish',{method:'POST', body:fd});
      $("#queueLog").textContent = 'Push ‚Üí '+r.status+'\n'+(await r.text()).slice(0,2000);
      show('toast','ƒê√£ push '+channel,'ok');
    }catch(e){ $("#queueLog").textContent=String(e); show('toast','Push l·ªói','err'); }
  }
  on($("#btnQueueStore"),'click',()=>pushSelected('store'));
  on($("#btnQueueFeat"),'click',()=>pushSelected('featured'));

  // ---------- Buttons / cfg ----------
  on($("#btnSaveCfg"),'click',saveCfg);
  on($("#btnClearCfg"),'click',()=>{ localStorage.removeItem(cfgKey); loadCfg(); show('toast','ƒê√£ x√≥a c·∫•u h√¨nh','ok'); });

  loadCfg();
})();
</script>
</body>
</html>
